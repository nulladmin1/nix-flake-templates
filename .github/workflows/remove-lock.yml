name: Remove Flake Lock Files automatically

on:  
  push:
    branches: [ $default-branch ]
  pull_request:
    branches: [ $default-branch ]

jobs:
  remove-lock:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout the repository
        uses: actions/checkout@v4
      
      - name: Find and remove Nix Flake lockfiles
        run: find . -name 'flake.lock' -exec rm {} +
      
      - name: Find and remove Poetry lockfiles
        run: find . -name 'poetry.lock' -exec rm {} +
      
      - name: Find and remove UV lockfiles
        run: find . -name 'uv.lock' -exec rm {} +
      
      - name: Find and remove Pubspec (flutter) lockfiles
        run: find . -name 'pubspec.lock' -exec rm {} +
      
      - name: Find and remove Cargo lockfiles
        run: find . -name 'Cargo.lock' -exec rm {} +
